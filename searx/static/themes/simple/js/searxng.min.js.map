{"version":3,"file":"searxng.min.js","sources":["../src/js/main/00_toolkit.js","../src/js/main/infinite_scroll.js","../src/js/main/keyboard.js","../src/js/main/mapresult.js","../src/js/main/preferences.js","../src/js/main/results.js","../src/js/main/search.js","../node_modules/autocomplete-js/dist/autocomplete.js"],"sourcesContent":["/**\n * @license\n * (C) Copyright Contributors to the SearXNG project.\n * (C) Copyright Contributors to the searx project (2014 - 2021).\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nwindow.searxng = (function (w, d) {\n\n  'use strict';\n\n  // not invented here tookit with bugs fixed elsewhere\n  // purposes : be just good enough and as small as possible\n\n  // from https://plainjs.com/javascript/events/live-binding-event-handlers-14/\n  if (w.Element) {\n    (function (ElementPrototype) {\n      ElementPrototype.matches = ElementPrototype.matches ||\n      ElementPrototype.matchesSelector ||\n      ElementPrototype.webkitMatchesSelector ||\n      ElementPrototype.msMatchesSelector ||\n      function (selector) {\n        var node = this, nodes = (node.parentNode || node.document).querySelectorAll(selector), i = -1;\n        while (nodes[++i] && nodes[i] != node);\n        return !!nodes[i];\n      };\n    })(Element.prototype);\n  }\n\n  function callbackSafe (callback, el, e) {\n    try {\n      callback.call(el, e);\n    } catch (exception) {\n      console.log(exception);\n    }\n  }\n\n  var searxng = window.searxng || {};\n\n  searxng.on = function (obj, eventType, callback, useCapture) {\n    useCapture = useCapture || false;\n    if (typeof obj !== 'string') {\n      // obj HTMLElement, HTMLDocument\n      obj.addEventListener(eventType, callback, useCapture);\n    } else {\n      // obj is a selector\n      d.addEventListener(eventType, function (e) {\n        var el = e.target || e.srcElement, found = false;\n        while (el && el.matches && el !== d && !(found = el.matches(obj))) el = el.parentElement;\n        if (found) callbackSafe(callback, el, e);\n      }, useCapture);\n    }\n  };\n\n  searxng.h = function (elementName, props, childrens) {\n    // similar to VueJS h function: https://vuejs.org/api/render-function.html#h\n    const e = document.createElement(elementName);\n    if (props != null) {\n      for (const [name, value] of Object.entries(props)) {\n        e.setAttribute(name, value);\n      }\n    }\n    if (childrens != null) {\n      if (typeof child === \"string\") {\n        e.appendChild(document.createTextNode(childrens))\n      } else {\n        for (const child of childrens) {\n          if (typeof child === \"string\") {\n            e.appendChild(document.createTextNode(child))\n          } else {\n            e.appendChild(child);\n          }\n        }\n      }\n    }\n    return e;\n  }\n\n  searxng.ready = function (callback) {\n    if (document.readyState != 'loading') {\n      callback.call(w);\n    } else {\n      w.addEventListener('DOMContentLoaded', callback.bind(w));\n    }\n  };\n\n  searxng.http = function (method, url, data = null) {\n    return new Promise(function (resolve, reject) {\n      try {\n        var req = new XMLHttpRequest();\n        req.open(method, url, true);\n        req.timeout = 20000;\n\n        // On load\n        req.onload = function () {\n          if (req.status == 200) {\n            resolve(req.response, req.responseType);\n          } else {\n            reject(Error(req.statusText));\n          }\n        };\n\n        // Handle network errors\n        req.onerror = function () {\n          reject(Error(\"Network Error\"));\n        };\n\n        req.onabort = function () {\n          reject(Error(\"Transaction is aborted\"));\n        };\n\n        req.ontimeout = function () {\n          reject(Error(\"Timeout\"));\n        }\n\n        // Make the request\n        if (data) {\n          req.send(data)\n        } else {\n          req.send();\n        }\n      } catch (ex) {\n        reject(ex);\n      }\n    });\n  };\n\n  searxng.loadStyle = function (src) {\n    var path = searxng.settings.theme_static_path + \"/\" + src,\n      id = \"style_\" + src.replace('.', '_'),\n      s = d.getElementById(id);\n    if (s === null) {\n      s = d.createElement('link');\n      s.setAttribute('id', id);\n      s.setAttribute('rel', 'stylesheet');\n      s.setAttribute('type', 'text/css');\n      s.setAttribute('href', path);\n      d.body.appendChild(s);\n    }\n  };\n\n  searxng.loadScript = function (src, callback) {\n    var path = searxng.settings.theme_static_path + \"/\" + src,\n      id = \"script_\" + src.replace('.', '_'),\n      s = d.getElementById(id);\n    if (s === null) {\n      s = d.createElement('script');\n      s.setAttribute('id', id);\n      s.setAttribute('src', path);\n      s.onload = callback;\n      s.onerror = function () {\n        s.setAttribute('error', '1');\n      };\n      d.body.appendChild(s);\n    } else if (!s.hasAttribute('error')) {\n      try {\n        callback.apply(s, []);\n      } catch (exception) {\n        console.log(exception);\n      }\n    } else {\n      console.log(\"callback not executed : script '\" + path + \"' not loaded.\");\n    }\n  };\n\n  searxng.insertBefore = function (newNode, referenceNode) {\n    referenceNode.parentNode.insertBefore(newNode, referenceNode);\n  };\n\n  searxng.insertAfter = function (newNode, referenceNode) {\n    referenceNode.parentNode.insertAfter(newNode, referenceNode.nextSibling);\n  };\n\n  searxng.on('.close', 'click', function () {\n    this.parentNode.classList.add('invisible');\n  });\n\n  function getEndpoint () {\n    for (var className of d.getElementsByTagName('body')[0].classList.values()) {\n      if (className.endsWith('_endpoint')) {\n        return className.split('_')[0];\n      }\n    }\n    return '';\n  }\n\n  searxng.endpoint = getEndpoint();\n\n  return searxng;\n})(window, document);\n","// SPDX-License-Identifier: AGPL-3.0-or-later\n\n/* global searxng */\n\nsearxng.ready(function () {\n  'use strict';\n\n  searxng.infinite_scroll_supported = (\n    'IntersectionObserver' in window &&\n    'IntersectionObserverEntry' in window &&\n    'intersectionRatio' in window.IntersectionObserverEntry.prototype);\n\n  if (searxng.endpoint !== 'results') {\n    return;\n  }\n\n  if (!searxng.infinite_scroll_supported) {\n    console.log('IntersectionObserver not supported');\n    return;\n  }\n\n  let d = document;\n  var onlyImages = d.getElementById('results').classList.contains('only_template_images');\n\n  function newLoadSpinner () {\n    var loader = d.createElement('div');\n    loader.classList.add('loader');\n    return loader;\n  }\n\n  function replaceChildrenWith (element, children) {\n    element.textContent = '';\n    children.forEach(child => element.appendChild(child));\n  }\n\n  function loadNextPage (callback) {\n    var form = d.querySelector('#pagination form.next_page');\n    if (!form) {\n      return\n    }\n    replaceChildrenWith(d.querySelector('#pagination'), [ newLoadSpinner() ]);\n    var formData = new FormData(form);\n    searxng.http('POST', d.querySelector('#search').getAttribute('action'), formData).then(\n      function (response) {\n        var nextPageDoc = new DOMParser().parseFromString(response, 'text/html');\n        var articleList = nextPageDoc.querySelectorAll('#urls article');\n        var paginationElement = nextPageDoc.querySelector('#pagination');\n        d.querySelector('#pagination').remove();\n        if (articleList.length > 0 && !onlyImages) {\n          // do not add <hr> element when there are only images\n          d.querySelector('#urls').appendChild(d.createElement('hr'));\n        }\n        articleList.forEach(articleElement => {\n          d.querySelector('#urls').appendChild(articleElement);\n        });\n        if (paginationElement) {\n          d.querySelector('#results').appendChild(paginationElement);\n          callback();\n        }\n      }\n    ).catch(\n      function (err) {\n        console.log(err);\n        var e = d.createElement('div');\n        e.textContent = searxng.settings.translations.error_loading_next_page;\n        e.classList.add('dialog-error');\n        e.setAttribute('role', 'alert');\n        replaceChildrenWith(d.querySelector('#pagination'), [ e ]);\n      }\n    )\n  }\n\n  if (searxng.settings.infinite_scroll && searxng.infinite_scroll_supported) {\n    const intersectionObserveOptions = {\n      rootMargin: \"20rem\",\n    };\n    const observedSelector = 'article.result:last-child';\n    const observer = new IntersectionObserver(entries => {\n      const paginationEntry = entries[0];\n      if (paginationEntry.isIntersecting) {\n        observer.unobserve(paginationEntry.target);\n        loadNextPage(() => observer.observe(d.querySelector(observedSelector), intersectionObserveOptions));\n      }\n    });\n    observer.observe(d.querySelector(observedSelector), intersectionObserveOptions);\n  }\n\n});\n","/* SPDX-License-Identifier: AGPL-3.0-or-later */\n/* global searxng */\n\nsearxng.ready(function () {\n\n  function isElementInDetail (el) {\n    while (el !== undefined) {\n      if (el.classList.contains('detail')) {\n        return true;\n      }\n      if (el.classList.contains('result')) {\n        // we found a result, no need to go to the root of the document:\n        // el is not inside a <div class=\"detail\"> element\n        return false;\n      }\n      el = el.parentNode;\n    }\n    return false;\n  }\n\n  function getResultElement (el) {\n    while (el !== undefined) {\n      if (el.classList.contains('result')) {\n        return el;\n      }\n      el = el.parentNode;\n    }\n    return undefined;\n  }\n\n  function isImageResult (resultElement) {\n    return resultElement && resultElement.classList.contains('result-images');\n  }\n\n  searxng.on('.result', 'click', function (e) {\n    if (!isElementInDetail(e.target)) {\n      highlightResult(this)(true, true);\n      let resultElement = getResultElement(e.target);\n      if (isImageResult(resultElement)) {\n        e.preventDefault();\n        searxng.selectImage(resultElement);\n      }\n    }\n  });\n\n  searxng.on('.result a', 'focus', function (e) {\n    if (!isElementInDetail(e.target)) {\n      let resultElement = getResultElement(e.target);\n      if (resultElement && resultElement.getAttribute(\"data-vim-selected\") === null) {\n        highlightResult(resultElement)(true);\n      }\n      if (isImageResult(resultElement)) {\n        searxng.selectImage(resultElement);\n      }\n    }\n  }, true);\n\n  var vimKeys = {\n    27: {\n      key: 'Escape',\n      fun: removeFocus,\n      des: 'remove focus from the focused input',\n      cat: 'Control'\n    },\n    73: {\n      key: 'i',\n      fun: searchInputFocus,\n      des: 'focus on the search input',\n      cat: 'Control'\n    },\n    66: {\n      key: 'b',\n      fun: scrollPage(-window.innerHeight),\n      des: 'scroll one page up',\n      cat: 'Navigation'\n    },\n    70: {\n      key: 'f',\n      fun: scrollPage(window.innerHeight),\n      des: 'scroll one page down',\n      cat: 'Navigation'\n    },\n    85: {\n      key: 'u',\n      fun: scrollPage(-window.innerHeight / 2),\n      des: 'scroll half a page up',\n      cat: 'Navigation'\n    },\n    68: {\n      key: 'd',\n      fun: scrollPage(window.innerHeight / 2),\n      des: 'scroll half a page down',\n      cat: 'Navigation'\n    },\n    71: {\n      key: 'g',\n      fun: scrollPageTo(-document.body.scrollHeight, 'top'),\n      des: 'scroll to the top of the page',\n      cat: 'Navigation'\n    },\n    86: {\n      key: 'v',\n      fun: scrollPageTo(document.body.scrollHeight, 'bottom'),\n      des: 'scroll to the bottom of the page',\n      cat: 'Navigation'\n    },\n    75: {\n      key: 'k',\n      fun: highlightResult('up'),\n      des: 'select previous search result',\n      cat: 'Results'\n    },\n    74: {\n      key: 'j',\n      fun: highlightResult('down'),\n      des: 'select next search result',\n      cat: 'Results'\n    },\n    80: {\n      key: 'p',\n      fun: GoToPreviousPage(),\n      des: 'go to previous page',\n      cat: 'Results'\n    },\n    78: {\n      key: 'n',\n      fun: GoToNextPage(),\n      des: 'go to next page',\n      cat: 'Results'\n    },\n    79: {\n      key: 'o',\n      fun: openResult(false),\n      des: 'open search result',\n      cat: 'Results'\n    },\n    84: {\n      key: 't',\n      fun: openResult(true),\n      des: 'open the result in a new tab',\n      cat: 'Results'\n    },\n    82: {\n      key: 'r',\n      fun: reloadPage,\n      des: 'reload page from the server',\n      cat: 'Control'\n    },\n    72: {\n      key: 'h',\n      fun: toggleHelp,\n      des: 'toggle help window',\n      cat: 'Other'\n    }\n  };\n\n  if (searxng.settings.hotkeys) {\n    searxng.on(document, \"keydown\", function (e) {\n      // check for modifiers so we don't break browser's hotkeys\n      if (Object.prototype.hasOwnProperty.call(vimKeys, e.keyCode) && !e.ctrlKey && !e.altKey && !e.shiftKey && !e.metaKey) {\n        var tagName = e.target.tagName.toLowerCase();\n        if (e.keyCode === 27) {\n          vimKeys[e.keyCode].fun(e);\n        } else {\n          if (e.target === document.body || tagName === 'a' || tagName === 'button') {\n            e.preventDefault();\n            vimKeys[e.keyCode].fun();\n          }\n        }\n      }\n    });\n  }\n\n  function highlightResult (which) {\n    return function (noScroll, keepFocus) {\n      var current = document.querySelector('.result[data-vim-selected]'),\n        effectiveWhich = which;\n      if (current === null) {\n        // no selection : choose the first one\n        current = document.querySelector('.result');\n        if (current === null) {\n          // no first one : there are no results\n          return;\n        }\n        // replace up/down actions by selecting first one\n        if (which === \"down\" || which === \"up\") {\n          effectiveWhich = current;\n        }\n      }\n\n      var next, results = document.querySelectorAll('.result');\n\n      if (typeof effectiveWhich !== 'string') {\n        next = effectiveWhich;\n      } else {\n        switch (effectiveWhich) {\n        case 'visible':\n          var top = document.documentElement.scrollTop || document.body.scrollTop;\n          var bot = top + document.documentElement.clientHeight;\n\n          for (var i = 0; i < results.length; i++) {\n            next = results[i];\n            var etop = next.offsetTop;\n            var ebot = etop + next.clientHeight;\n\n            if ((ebot <= bot) && (etop > top)) {\n              break;\n            }\n          }\n          break;\n        case 'down':\n          next = current.nextElementSibling;\n          if (next === null) {\n            next = results[0];\n          }\n          break;\n        case 'up':\n          next = current.previousElementSibling;\n          if (next === null) {\n            next = results[results.length - 1];\n          }\n          break;\n        case 'bottom':\n          next = results[results.length - 1];\n          break;\n        case 'top':\n          /* falls through */\n        default:\n          next = results[0];\n        }\n      }\n\n      if (next) {\n        current.removeAttribute('data-vim-selected');\n        next.setAttribute('data-vim-selected', 'true');\n        if (!keepFocus) {\n          var link = next.querySelector('h3 a') || next.querySelector('a');\n          if (link !== null) {\n            link.focus();\n          }\n        }\n        if (!noScroll) {\n          scrollPageToSelected();\n        }\n      }\n    };\n  }\n\n  function reloadPage () {\n    document.location.reload(true);\n  }\n\n  function removeFocus (e) {\n    const tagName = e.target.tagName.toLowerCase();\n    if (document.activeElement && (tagName === 'input' || tagName === 'select' || tagName === 'textarea')) {\n      document.activeElement.blur();\n    } else {\n      searxng.closeDetail();\n    }\n  }\n\n  function pageButtonClick (css_selector) {\n    return function () {\n      var button = document.querySelector(css_selector);\n      if (button) {\n        button.click();\n      }\n    };\n  }\n\n  function GoToNextPage () {\n    return pageButtonClick('nav#pagination .next_page button[type=\"submit\"]');\n  }\n\n  function GoToPreviousPage () {\n    return pageButtonClick('nav#pagination .previous_page button[type=\"submit\"]');\n  }\n\n  function scrollPageToSelected () {\n    var sel = document.querySelector('.result[data-vim-selected]');\n    if (sel === null) {\n      return;\n    }\n    var wtop = document.documentElement.scrollTop || document.body.scrollTop,\n      wheight = document.documentElement.clientHeight,\n      etop = sel.offsetTop,\n      ebot = etop + sel.clientHeight,\n      offset = 120;\n    // first element ?\n    if ((sel.previousElementSibling === null) && (ebot < wheight)) {\n      // set to the top of page if the first element\n      // is fully included in the viewport\n      window.scroll(window.scrollX, 0);\n      return;\n    }\n    if (wtop > (etop - offset)) {\n      window.scroll(window.scrollX, etop - offset);\n    } else {\n      var wbot = wtop + wheight;\n      if (wbot < (ebot + offset)) {\n        window.scroll(window.scrollX, ebot - wheight + offset);\n      }\n    }\n  }\n\n  function scrollPage (amount) {\n    return function () {\n      window.scrollBy(0, amount);\n      highlightResult('visible')();\n    };\n  }\n\n  function scrollPageTo (position, nav) {\n    return function () {\n      window.scrollTo(0, position);\n      highlightResult(nav)();\n    };\n  }\n\n  function searchInputFocus () {\n    window.scrollTo(0, 0);\n    var q = document.querySelector('#q');\n    q.focus();\n    if (q.setSelectionRange) {\n      var len = q.value.length;\n      q.setSelectionRange(len, len);\n    }\n  }\n\n  function openResult (newTab) {\n    return function () {\n      var link = document.querySelector('.result[data-vim-selected] h3 a');\n      if (link === null) {\n        link = document.querySelector('.result[data-vim-selected] > a');\n      }\n      if (link !== null) {\n        var url = link.getAttribute('href');\n        if (newTab) {\n          window.open(url);\n        } else {\n          window.location.href = url;\n        }\n      }\n    };\n  }\n\n  function createHelpPanel (htmlId) {\n    var categories = {};\n\n    for (var k in vimKeys) {\n      var key = vimKeys[k];\n      categories[key.cat] = categories[key.cat] || [];\n      categories[key.cat].push(key);\n    }\n\n    var sorted = Object.keys(categories).sort(function (a, b) {\n      return categories[b].length - categories[a].length;\n    });\n\n    if (sorted.length === 0) {\n      return;\n    }\n\n    const h = searxng.h;\n\n    const rows = [];\n    for (let i = 0; i < sorted.length; i++) {\n      if (i % 2 == 0) {\n        rows.push(h(('tr')))\n      }\n      const cat = categories[sorted[i]];\n      const h4 = h('h4', null, cat[0].cat);\n      const ul = h('ul', {class: \"list-unstyled\"});\n      for (const cj in cat) {\n        ul.appendChild(\n          h('li', null, [\n            h('kbd', null, cat[cj].key),\n            ' ' + cat[cj].des\n          ]));\n      }\n      const td = h('td', null, [h4, ul]);\n      rows[rows.length - 1].appendChild(td);\n    }\n\n    return h('div', {class: 'dialog-modal', id: htmlId}, [\n      h('a', {class: \"close\", \"aria-label\": \"close\", \"title\": \"close\"}, '×'),\n      h('h3', null, 'How to navigate searx with Vim-like hotkeys'),\n      h('table', null, rows),\n    ]);\n  }\n\n  function toggleHelp () {\n    var helpPanel = document.querySelector('#vim-hotkeys-help');\n    if (helpPanel == null) {\n      // first call\n      helpPanel = createHelpPanel('vim-hotkeys-help');\n      var body = document.getElementsByTagName('body')[0];\n      body.appendChild(helpPanel);\n    } else {\n      // togggle hidden\n      helpPanel.classList.toggle('invisible');\n      return;\n    }\n  }\n\n  searxng.scrollPageToSelected = scrollPageToSelected;\n  searxng.selectNext = highlightResult('down');\n  searxng.selectPrevious = highlightResult('up');\n});\n","/* SPDX-License-Identifier: AGPL-3.0-or-later */\n/* global L */\n(function (w, d, searxng) {\n  'use strict';\n\n  searxng.ready(function () {\n    searxng.on('.searxng_init_map', 'click', function (event) {\n      // no more request\n      this.classList.remove(\"searxng_init_map\");\n\n      //\n      var leaflet_target = this.dataset.leafletTarget;\n      var map_lon = parseFloat(this.dataset.mapLon);\n      var map_lat = parseFloat(this.dataset.mapLat);\n      var map_zoom = parseFloat(this.dataset.mapZoom);\n      var map_boundingbox = JSON.parse(this.dataset.mapBoundingbox);\n      var map_geojson = JSON.parse(this.dataset.mapGeojson);\n\n      searxng.loadStyle('css/leaflet.css');\n      searxng.loadScript('js/leaflet.js', function () {\n        var map_bounds = null;\n        if (map_boundingbox) {\n          var southWest = L.latLng(map_boundingbox[0], map_boundingbox[2]);\n          var northEast = L.latLng(map_boundingbox[1], map_boundingbox[3]);\n          map_bounds = L.latLngBounds(southWest, northEast);\n        }\n\n        // init map\n        var map = L.map(leaflet_target);\n        // create the tile layer with correct attribution\n        var osmMapnikUrl = 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';\n        var osmMapnikAttrib = 'Map data © <a href=\"https://openstreetmap.org\">OpenStreetMap</a> contributors';\n        var osmMapnik = new L.TileLayer(osmMapnikUrl, {minZoom: 1, maxZoom: 19, attribution: osmMapnikAttrib});\n        var osmWikimediaUrl = 'https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}.png';\n        var osmWikimediaAttrib = 'Wikimedia maps | Maps data © <a href=\"https://openstreetmap.org\">OpenStreetMap contributors</a>';\n        var osmWikimedia = new L.TileLayer(osmWikimediaUrl, {minZoom: 1, maxZoom: 19, attribution: osmWikimediaAttrib});\n        // init map view\n        if (map_bounds) {\n          // TODO hack: https://github.com/Leaflet/Leaflet/issues/2021\n          // Still useful ?\n          setTimeout(function () {\n            map.fitBounds(map_bounds, {\n              maxZoom: 17\n            });\n          }, 0);\n        } else if (map_lon && map_lat) {\n          if (map_zoom) {\n            map.setView(new L.latLng(map_lat, map_lon), map_zoom);\n          } else {\n            map.setView(new L.latLng(map_lat, map_lon), 8);\n          }\n        }\n\n        map.addLayer(osmMapnik);\n\n        var baseLayers = {\n          \"OSM Mapnik\": osmMapnik,\n          \"OSM Wikimedia\": osmWikimedia,\n        };\n\n        L.control.layers(baseLayers).addTo(map);\n\n        if (map_geojson) {\n          L.geoJson(map_geojson).addTo(map);\n        } /* else if(map_bounds) {\n          L.rectangle(map_bounds, {color: \"#ff7800\", weight: 3, fill:false}).addTo(map);\n        } */\n      });\n\n      // this event occour only once per element\n      event.preventDefault();\n    });\n  });\n})(window, document, window.searxng);\n","/* SPDX-License-Identifier: AGPL-3.0-or-later */\n(function (w, d, searxng) {\n  'use strict';\n\n  if (searxng.endpoint !== 'preferences') {\n    return;\n  }\n\n  function update_engine_descriptions (engine_descriptions) {\n    for (const [engine_name, description] of Object.entries(engine_descriptions)) {\n      let elements = d.querySelectorAll('[data-engine-name=\"' + engine_name + '\"] .engine-description');\n      for (const element of elements) {\n        let descriptionElement = document.createTextNode(description[0] + \" \");\n        let sourceElement = d.createElement('i');\n        // \\xa0 is a breaking space ( &nbsp; ): see https://en.wikipedia.org/wiki/Non-breaking_space\n        sourceElement.textContent = searxng.settings.translations.Source + ':\\xa0' + description[1];\n        element.appendChild(descriptionElement);\n        element.appendChild(sourceElement);\n      }\n    }\n  }\n\n  searxng.ready(function () {\n    let engine_descriptions = null;\n    function load_engine_descriptions () {\n      if (engine_descriptions == null) {\n        searxng.http(\"GET\", \"engine_descriptions.json\").then(function (content) {\n          engine_descriptions = JSON.parse(content);\n          update_engine_descriptions(engine_descriptions);\n        });\n      }\n    }\n\n    for (const el of d.querySelectorAll('[data-engine-name]')) {\n      searxng.on(el, 'mouseenter', load_engine_descriptions);\n    }\n  });\n})(window, document, window.searxng);\n","/* SPDX-License-Identifier: AGPL-3.0-or-later */\n(function (w, d, searxng) {\n  'use strict';\n\n  if (searxng.endpoint !== 'results') {\n    return;\n  }\n\n  searxng.ready(function () {\n    d.querySelectorAll('#urls img.image').forEach(\n      img =>\n        img.addEventListener(\n          'error', () => {\n            img.style.display = 'none';\n            img.error = null;\n          }\n        ));\n\n    searxng.on('.btn-collapse', 'click', function () {\n      var btnLabelCollapsed = this.getAttribute('data-btn-text-collapsed');\n      var btnLabelNotCollapsed = this.getAttribute('data-btn-text-not-collapsed');\n      var btnLabelElement = this.querySelector('.btn-label');\n      var target = this.getAttribute('data-target');\n      var targetElement = d.querySelector(target);\n      this.classList.toggle('collapsed');\n      if (this.classList.contains('collapsed')) {\n        btnLabelElement.textContent = btnLabelCollapsed;\n      } else {\n        btnLabelElement.textContent = btnLabelNotCollapsed;\n      }\n      targetElement.classList.toggle('invisible');\n    });\n\n    searxng.on('.media-loader', 'click', function () {\n      var target = this.getAttribute('data-target');\n      var iframe_load = d.querySelector(target + ' > iframe');\n      var srctest = iframe_load.getAttribute('src');\n      if (srctest === null || srctest === undefined || srctest === false) {\n        iframe_load.setAttribute('src', iframe_load.getAttribute('data-src'));\n      }\n    });\n\n    searxng.selectImage = function (resultElement) {\n      /* eslint no-unused-vars: 0 */\n      if (resultElement) {\n        // load full size image in background\n        const imgElement = resultElement.querySelector('.result-images-source img');\n        const thumbnailElement = resultElement.querySelector('.image_thumbnail');\n        const detailElement = resultElement.querySelector('.detail');\n        if (imgElement) {\n          const imgSrc = imgElement.getAttribute('data-src');\n          if (imgSrc) {\n            const loader = d.createElement('div');\n            const imgLoader = new Image();\n\n            loader.classList.add('loader');\n            detailElement.appendChild(loader);\n\n            imgLoader.onload = e => {\n              imgElement.src = imgSrc;\n              loader.remove();\n            };\n            imgLoader.onerror = e => {\n              loader.remove();\n            };\n            imgLoader.src = imgSrc;\n            imgElement.src = thumbnailElement.src;\n            imgElement.removeAttribute('data-src');\n          }\n        }\n      }\n      d.getElementById('results').classList.add('image-detail-open');\n      searxng.scrollPageToSelected();\n    }\n\n    searxng.closeDetail = function (e) {\n      d.getElementById('results').classList.remove('image-detail-open');\n      searxng.scrollPageToSelected();\n    }\n    searxng.on('.result-detail-close', 'click', e => {\n      e.preventDefault();\n      searxng.closeDetail();\n    });\n    searxng.on('.result-detail-previous', 'click', e => searxng.selectPrevious(false));\n    searxng.on('.result-detail-next', 'click', e => searxng.selectNext(false));\n\n    w.addEventListener('scroll', function () {\n      var e = d.getElementById('backToTop'),\n        scrollTop = document.documentElement.scrollTop || document.body.scrollTop,\n        results = d.getElementById('results');\n      if (e !== null) {\n        if (scrollTop >= 100) {\n          results.classList.add('scrolling');\n        } else {\n          results.classList.remove('scrolling');\n        }\n      }\n    }, true);\n\n  });\n\n})(window, document, window.searxng);\n","/* SPDX-License-Identifier: AGPL-3.0-or-later */\n/* global AutoComplete */\n(function (w, d, searxng) {\n  'use strict';\n\n  var qinput_id = \"q\", qinput;\n\n  const isMobile = window.matchMedia(\"only screen and (max-width: 50em)\").matches;\n\n  function submitIfQuery () {\n    if (qinput.value.length  > 0) {\n      var search = document.getElementById('search');\n      setTimeout(search.submit.bind(search), 0);\n    }\n  }\n\n  function createClearButton (qinput) {\n    var cs = document.getElementById('clear_search');\n    var updateClearButton = function () {\n      if (qinput.value.length === 0) {\n        cs.classList.add(\"empty\");\n      } else {\n        cs.classList.remove(\"empty\");\n      }\n    };\n\n    // update status, event listener\n    updateClearButton();\n    cs.addEventListener('click', function (ev) {\n      qinput.value = '';\n      qinput.focus();\n      updateClearButton();\n      ev.preventDefault();\n    });\n    qinput.addEventListener('keyup', updateClearButton, false);\n  }\n\n  searxng.ready(function () {\n    qinput = d.getElementById(qinput_id);\n\n    if (qinput !== null) {\n      // clear button\n      createClearButton(qinput);\n\n      // autocompleter\n      if (searxng.settings.autocomplete_provider) {\n        searxng.autocomplete = AutoComplete.call(w, {\n          Url: \"./autocompleter\",\n          EmptyMessage: searxng.settings.translations.no_item_found,\n          HttpMethod: searxng.settings.http_method,\n          HttpHeaders: {\n            \"Content-type\": \"application/x-www-form-urlencoded\",\n            \"X-Requested-With\": \"XMLHttpRequest\"\n          },\n          MinChars: searxng.settings.autocomplete_min,\n          Delay: 300,\n          _Position: function () {},\n          _Open: function () {\n            var params = this;\n            Array.prototype.forEach.call(this.DOMResults.getElementsByTagName(\"li\"), function (li) {\n              if (li.getAttribute(\"class\") != \"locked\") {\n                li.onmousedown = function () {\n                  params._Select(li);\n                };\n              }\n            });\n          },\n        }, \"#\" + qinput_id);\n      }\n\n      if (!isMobile && document.querySelector('.index_endpoint')) {\n        qinput.focus();\n      }\n    }\n\n    // vanilla js version of search_on_category_select.js\n    if (qinput !== null && d.querySelector('.help') != null && searxng.settings.search_on_category_select) {\n      d.querySelector('.help').className = 'invisible';\n\n      searxng.on('#categories input', 'change', function () {\n        var i, categories = d.querySelectorAll('#categories input[type=\"checkbox\"]');\n        for (i = 0; i < categories.length; i++) {\n          if (categories[i] !== this && categories[i].checked) {\n            categories[i].click();\n          }\n        }\n        if (! this.checked) {\n          this.click();\n        }\n        submitIfQuery();\n        return false;\n      });\n\n      searxng.on(d.getElementById('safesearch'), 'change', submitIfQuery);\n      searxng.on(d.getElementById('time_range'), 'change', submitIfQuery);\n      searxng.on(d.getElementById('language'), 'change', submitIfQuery);\n    }\n\n  });\n\n})(window, document, window.searxng);\n","(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.AutoComplete = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n/*\n * @license MIT\n *\n * Autocomplete.js v2.7.1\n * Developed by Baptiste Donaux\n * http://autocomplete-js.com\n *\n * (c) 2017, Baptiste Donaux\n */\n\"use strict\";\nvar ConditionOperator;\n(function (ConditionOperator) {\n    ConditionOperator[ConditionOperator[\"AND\"] = 0] = \"AND\";\n    ConditionOperator[ConditionOperator[\"OR\"] = 1] = \"OR\";\n})(ConditionOperator || (ConditionOperator = {}));\nvar EventType;\n(function (EventType) {\n    EventType[EventType[\"KEYDOWN\"] = 0] = \"KEYDOWN\";\n    EventType[EventType[\"KEYUP\"] = 1] = \"KEYUP\";\n})(EventType || (EventType = {}));\n/**\n * Core\n *\n * @class\n * @author Baptiste Donaux <baptiste.donaux@gmail.com> @baptistedonaux\n */\nvar AutoComplete = /** @class */ (function () {\n    // Constructor\n    function AutoComplete(params, selector) {\n        if (params === void 0) { params = {}; }\n        if (selector === void 0) { selector = \"[data-autocomplete]\"; }\n        if (Array.isArray(selector)) {\n            selector.forEach(function (s) {\n                new AutoComplete(params, s);\n            });\n        }\n        else if (typeof selector == \"string\") {\n            var elements = document.querySelectorAll(selector);\n            Array.prototype.forEach.call(elements, function (input) {\n                new AutoComplete(params, input);\n            });\n        }\n        else {\n            var specificParams = AutoComplete.merge(AutoComplete.defaults, params, {\n                DOMResults: document.createElement(\"div\")\n            });\n            AutoComplete.prototype.create(specificParams, selector);\n            return specificParams;\n        }\n    }\n    AutoComplete.prototype.create = function (params, element) {\n        params.Input = element;\n        if (params.Input.nodeName.match(/^INPUT$/i) && (params.Input.hasAttribute(\"type\") === false || params.Input.getAttribute(\"type\").match(/^TEXT|SEARCH$/i))) {\n            params.Input.setAttribute(\"autocomplete\", \"off\");\n            params._Position(params);\n            params.Input.parentNode.appendChild(params.DOMResults);\n            params.$Listeners = {\n                blur: params._Blur.bind(params),\n                destroy: AutoComplete.prototype.destroy.bind(null, params),\n                focus: params._Focus.bind(params),\n                keyup: AutoComplete.prototype.event.bind(null, params, EventType.KEYUP),\n                keydown: AutoComplete.prototype.event.bind(null, params, EventType.KEYDOWN),\n                position: params._Position.bind(params)\n            };\n            for (var event in params.$Listeners) {\n                params.Input.addEventListener(event, params.$Listeners[event]);\n            }\n        }\n    };\n    AutoComplete.prototype.getEventsByType = function (params, type) {\n        var mappings = {};\n        for (var key in params.KeyboardMappings) {\n            var event = EventType.KEYUP;\n            if (params.KeyboardMappings[key].Event !== undefined) {\n                event = params.KeyboardMappings[key].Event;\n            }\n            if (event == type) {\n                mappings[key] = params.KeyboardMappings[key];\n            }\n        }\n        return mappings;\n    };\n    AutoComplete.prototype.event = function (params, type, event) {\n        var eventIdentifier = function (condition) {\n            if ((match === true && mapping.Operator == ConditionOperator.AND) || (match === false && mapping.Operator == ConditionOperator.OR)) {\n                condition = AutoComplete.merge({\n                    Not: false\n                }, condition);\n                if (condition.hasOwnProperty(\"Is\")) {\n                    if (condition.Is == event.keyCode) {\n                        match = !condition.Not;\n                    }\n                    else {\n                        match = condition.Not;\n                    }\n                }\n                else if (condition.hasOwnProperty(\"From\") && condition.hasOwnProperty(\"To\")) {\n                    if (event.keyCode >= condition.From && event.keyCode <= condition.To) {\n                        match = !condition.Not;\n                    }\n                    else {\n                        match = condition.Not;\n                    }\n                }\n            }\n        };\n        for (var name in AutoComplete.prototype.getEventsByType(params, type)) {\n            var mapping = AutoComplete.merge({\n                Operator: ConditionOperator.AND\n            }, params.KeyboardMappings[name]), match = ConditionOperator.AND == mapping.Operator;\n            mapping.Conditions.forEach(eventIdentifier);\n            if (match === true) {\n                mapping.Callback.call(params, event);\n            }\n        }\n    };\n    AutoComplete.prototype.makeRequest = function (params, callback, callbackErr) {\n        var propertyHttpHeaders = Object.getOwnPropertyNames(params.HttpHeaders), request = new XMLHttpRequest(), method = params._HttpMethod(), url = params._Url(), queryParams = params._Pre(), queryParamsStringify = encodeURIComponent(params._QueryArg()) + \"=\" + encodeURIComponent(queryParams);\n        if (method.match(/^GET$/i)) {\n            if (url.indexOf(\"?\") !== -1) {\n                url += \"&\" + queryParamsStringify;\n            }\n            else {\n                url += \"?\" + queryParamsStringify;\n            }\n        }\n        request.open(method, url, true);\n        for (var i = propertyHttpHeaders.length - 1; i >= 0; i--) {\n            request.setRequestHeader(propertyHttpHeaders[i], params.HttpHeaders[propertyHttpHeaders[i]]);\n        }\n        request.onreadystatechange = function () {\n            if (request.readyState == 4 && request.status == 200) {\n                params.$Cache[queryParams] = request.response;\n                callback(request.response);\n            }\n            else if (request.status >= 400) {\n                callbackErr();\n            }\n        };\n        return request;\n    };\n    AutoComplete.prototype.ajax = function (params, request, timeout) {\n        if (timeout === void 0) { timeout = true; }\n        if (params.$AjaxTimer) {\n            window.clearTimeout(params.$AjaxTimer);\n        }\n        if (timeout === true) {\n            params.$AjaxTimer = window.setTimeout(AutoComplete.prototype.ajax.bind(null, params, request, false), params.Delay);\n        }\n        else {\n            if (params.Request) {\n                params.Request.abort();\n            }\n            params.Request = request;\n            params.Request.send(params._QueryArg() + \"=\" + params._Pre());\n        }\n    };\n    AutoComplete.prototype.cache = function (params, callback, callbackErr) {\n        var response = params._Cache(params._Pre());\n        if (response === undefined) {\n            var request = AutoComplete.prototype.makeRequest(params, callback, callbackErr);\n            AutoComplete.prototype.ajax(params, request);\n        }\n        else {\n            callback(response);\n        }\n    };\n    AutoComplete.prototype.destroy = function (params) {\n        for (var event in params.$Listeners) {\n            params.Input.removeEventListener(event, params.$Listeners[event]);\n        }\n        params.DOMResults.parentNode.removeChild(params.DOMResults);\n    };\n    AutoComplete.merge = function () {\n        var merge = {}, tmp;\n        for (var i = 0; i < arguments.length; i++) {\n            for (tmp in arguments[i]) {\n                merge[tmp] = arguments[i][tmp];\n            }\n        }\n        return merge;\n    };\n    AutoComplete.defaults = {\n        Delay: 150,\n        EmptyMessage: \"No result here\",\n        Highlight: {\n            getRegex: function (value) {\n                return new RegExp(value, \"ig\");\n            },\n            transform: function (value) {\n                return \"<strong>\" + value + \"</strong>\";\n            }\n        },\n        HttpHeaders: {\n            \"Content-type\": \"application/x-www-form-urlencoded\"\n        },\n        Limit: 0,\n        MinChars: 0,\n        HttpMethod: \"GET\",\n        QueryArg: \"q\",\n        Url: null,\n        KeyboardMappings: {\n            \"Enter\": {\n                Conditions: [{\n                        Is: 13,\n                        Not: false\n                    }],\n                Callback: function (event) {\n                    if (this.DOMResults.getAttribute(\"class\").indexOf(\"open\") != -1) {\n                        var liActive = this.DOMResults.querySelector(\"li.active\");\n                        if (liActive !== null) {\n                            event.preventDefault();\n                            this._Select(liActive);\n                            this.DOMResults.setAttribute(\"class\", \"autocomplete\");\n                        }\n                    }\n                },\n                Operator: ConditionOperator.AND,\n                Event: EventType.KEYDOWN\n            },\n            \"KeyUpAndDown_down\": {\n                Conditions: [{\n                        Is: 38,\n                        Not: false\n                    },\n                    {\n                        Is: 40,\n                        Not: false\n                    }],\n                Callback: function (event) {\n                    event.preventDefault();\n                },\n                Operator: ConditionOperator.OR,\n                Event: EventType.KEYDOWN\n            },\n            \"KeyUpAndDown_up\": {\n                Conditions: [{\n                        Is: 38,\n                        Not: false\n                    },\n                    {\n                        Is: 40,\n                        Not: false\n                    }],\n                Callback: function (event) {\n                    event.preventDefault();\n                    var first = this.DOMResults.querySelector(\"li:first-child:not(.locked)\"), last = this.DOMResults.querySelector(\"li:last-child:not(.locked)\"), active = this.DOMResults.querySelector(\"li.active\");\n                    if (active) {\n                        var currentIndex = Array.prototype.indexOf.call(active.parentNode.children, active), position = currentIndex + (event.keyCode - 39), lisCount = this.DOMResults.getElementsByTagName(\"li\").length;\n                        if (position < 0) {\n                            position = lisCount - 1;\n                        }\n                        else if (position >= lisCount) {\n                            position = 0;\n                        }\n                        active.classList.remove(\"active\");\n                        active.parentElement.children.item(position).classList.add(\"active\");\n                    }\n                    else if (last && event.keyCode == 38) {\n                        last.classList.add(\"active\");\n                    }\n                    else if (first) {\n                        first.classList.add(\"active\");\n                    }\n                },\n                Operator: ConditionOperator.OR,\n                Event: EventType.KEYUP\n            },\n            \"AlphaNum\": {\n                Conditions: [{\n                        Is: 13,\n                        Not: true\n                    }, {\n                        From: 35,\n                        To: 40,\n                        Not: true\n                    }],\n                Callback: function () {\n                    var oldValue = this.Input.getAttribute(\"data-autocomplete-old-value\"), currentValue = this._Pre();\n                    if (currentValue !== \"\" && currentValue.length >= this._MinChars()) {\n                        if (!oldValue || currentValue != oldValue) {\n                            this.DOMResults.setAttribute(\"class\", \"autocomplete open\");\n                        }\n                        AutoComplete.prototype.cache(this, function (response) {\n                            this._Render(this._Post(response));\n                            this._Open();\n                        }.bind(this), this._Error);\n                    }\n                    else {\n                        this._Close();\n                    }\n                },\n                Operator: ConditionOperator.AND,\n                Event: EventType.KEYUP\n            }\n        },\n        DOMResults: null,\n        Request: null,\n        Input: null,\n        /**\n         * Return the message when no result returns\n         */\n        _EmptyMessage: function () {\n            var emptyMessage = \"\";\n            if (this.Input.hasAttribute(\"data-autocomplete-empty-message\")) {\n                emptyMessage = this.Input.getAttribute(\"data-autocomplete-empty-message\");\n            }\n            else if (this.EmptyMessage !== false) {\n                emptyMessage = this.EmptyMessage;\n            }\n            else {\n                emptyMessage = \"\";\n            }\n            return emptyMessage;\n        },\n        /**\n         * Returns the maximum number of results\n         */\n        _Limit: function () {\n            var limit = this.Input.getAttribute(\"data-autocomplete-limit\");\n            if (isNaN(limit) || limit === null) {\n                return this.Limit;\n            }\n            return parseInt(limit, 10);\n        },\n        /**\n         * Returns the minimum number of characters entered before firing ajax\n         */\n        _MinChars: function () {\n            var minchars = this.Input.getAttribute(\"data-autocomplete-minchars\");\n            if (isNaN(minchars) || minchars === null) {\n                return this.MinChars;\n            }\n            return parseInt(minchars, 10);\n        },\n        /**\n         * Apply transformation on labels response\n         */\n        _Highlight: function (label) {\n            return label.replace(this.Highlight.getRegex(this._Pre()), this.Highlight.transform);\n        },\n        /**\n         * Returns the HHTP method to use\n         */\n        _HttpMethod: function () {\n            if (this.Input.hasAttribute(\"data-autocomplete-method\")) {\n                return this.Input.getAttribute(\"data-autocomplete-method\");\n            }\n            return this.HttpMethod;\n        },\n        /**\n         * Returns the query param to use\n         */\n        _QueryArg: function () {\n            if (this.Input.hasAttribute(\"data-autocomplete-param-name\")) {\n                return this.Input.getAttribute(\"data-autocomplete-param-name\");\n            }\n            return this.QueryArg;\n        },\n        /**\n         * Returns the URL to use for AJAX request\n         */\n        _Url: function () {\n            if (this.Input.hasAttribute(\"data-autocomplete\")) {\n                return this.Input.getAttribute(\"data-autocomplete\");\n            }\n            return this.Url;\n        },\n        /**\n         * Manage the close\n         */\n        _Blur: function (now) {\n            if (now === void 0) { now = false; }\n            if (now) {\n                this._Close();\n            }\n            else {\n                var params = this;\n                setTimeout(function () {\n                    params._Blur(true);\n                }, 150);\n            }\n        },\n        /**\n         * Manage the cache\n         */\n        _Cache: function (value) {\n            return this.$Cache[value];\n        },\n        /**\n         * Manage the open\n         */\n        _Focus: function () {\n            var oldValue = this.Input.getAttribute(\"data-autocomplete-old-value\");\n            if ((!oldValue || this.Input.value != oldValue) && this._MinChars() <= this.Input.value.length) {\n                this.DOMResults.setAttribute(\"class\", \"autocomplete open\");\n            }\n        },\n        /**\n         * Bind all results item if one result is opened\n         */\n        _Open: function () {\n            var params = this;\n            Array.prototype.forEach.call(this.DOMResults.getElementsByTagName(\"li\"), function (li) {\n                if (li.getAttribute(\"class\") != \"locked\") {\n                    li.onclick = function () {\n                        params._Select(li);\n                    };\n                }\n            });\n        },\n        _Close: function () {\n            this.DOMResults.setAttribute(\"class\", \"autocomplete\");\n        },\n        /**\n         * Position the results HTML element\n         */\n        _Position: function () {\n            this.DOMResults.setAttribute(\"class\", \"autocomplete\");\n            this.DOMResults.setAttribute(\"style\", \"top:\" + (this.Input.offsetTop + this.Input.offsetHeight) + \"px;left:\" + this.Input.offsetLeft + \"px;width:\" + this.Input.clientWidth + \"px;\");\n        },\n        /**\n         * Execute the render of results DOM element\n         */\n        _Render: function (response) {\n            var ul;\n            if (typeof response == \"string\") {\n                ul = this._RenderRaw(response);\n            }\n            else {\n                ul = this._RenderResponseItems(response);\n            }\n            if (this.DOMResults.hasChildNodes()) {\n                this.DOMResults.removeChild(this.DOMResults.childNodes[0]);\n            }\n            this.DOMResults.appendChild(ul);\n        },\n        /**\n         * ResponseItems[] rendering\n         */\n        _RenderResponseItems: function (response) {\n            var ul = document.createElement(\"ul\"), li = document.createElement(\"li\"), limit = this._Limit();\n            // Order\n            if (limit < 0) {\n                response = response.reverse();\n            }\n            else if (limit === 0) {\n                limit = response.length;\n            }\n            for (var item = 0; item < Math.min(Math.abs(limit), response.length); item++) {\n                li.innerHTML = response[item].Label;\n                li.setAttribute(\"data-autocomplete-value\", response[item].Value);\n                ul.appendChild(li);\n                li = document.createElement(\"li\");\n            }\n            return ul;\n        },\n        /**\n         * string response rendering (RAW HTML)\n         */\n        _RenderRaw: function (response) {\n            var ul = document.createElement(\"ul\"), li = document.createElement(\"li\");\n            if (response.length > 0) {\n                this.DOMResults.innerHTML = response;\n            }\n            else {\n                var emptyMessage = this._EmptyMessage();\n                if (emptyMessage !== \"\") {\n                    li.innerHTML = emptyMessage;\n                    li.setAttribute(\"class\", \"locked\");\n                    ul.appendChild(li);\n                }\n            }\n            return ul;\n        },\n        /**\n         * Deal with request response\n         */\n        _Post: function (response) {\n            try {\n                var returnResponse = [];\n                //JSON return\n                var json = JSON.parse(response);\n                if (Object.keys(json).length === 0) {\n                    return \"\";\n                }\n                if (Array.isArray(json)) {\n                    for (var i = 0; i < Object.keys(json).length; i++) {\n                        returnResponse[returnResponse.length] = { \"Value\": json[i], \"Label\": this._Highlight(json[i]) };\n                    }\n                }\n                else {\n                    for (var value in json) {\n                        returnResponse.push({\n                            \"Value\": value,\n                            \"Label\": this._Highlight(json[value])\n                        });\n                    }\n                }\n                return returnResponse;\n            }\n            catch (event) {\n                //HTML return\n                return response;\n            }\n        },\n        /**\n         * Return the autocomplete value to send (before request)\n         */\n        _Pre: function () {\n            return this.Input.value;\n        },\n        /**\n         * Choice one result item\n         */\n        _Select: function (item) {\n            if (item.hasAttribute(\"data-autocomplete-value\")) {\n                this.Input.value = item.getAttribute(\"data-autocomplete-value\");\n            }\n            else {\n                this.Input.value = item.innerHTML;\n            }\n            this.Input.setAttribute(\"data-autocomplete-old-value\", this.Input.value);\n        },\n        /**\n         * Handle HTTP error on the request\n         */\n        _Error: function () {\n        },\n        $AjaxTimer: null,\n        $Cache: {},\n        $Listeners: {}\n    };\n    return AutoComplete;\n}());\nmodule.exports = AutoComplete;\n\n},{}]},{},[1])(1)\n});\n"],"names":["window","searxng","w","d","Element","ElementPrototype","matches","matchesSelector","webkitMatchesSelector","msMatchesSelector","selector","node","this","nodes","parentNode","document","querySelectorAll","i","prototype","callbackSafe","callback","el","e","call","exception","console","log","on","obj","eventType","useCapture","addEventListener","target","srcElement","found","parentElement","h","elementName","props","childrens","createElement","name","value","Object","entries","setAttribute","child","appendChild","createTextNode","ready","readyState","bind","http","method","url","data","Promise","resolve","reject","req","XMLHttpRequest","open","timeout","onload","status","response","responseType","Error","statusText","onerror","onabort","ontimeout","send","ex","loadStyle","src","path","settings","theme_static_path","id","replace","s","getElementById","body","loadScript","hasAttribute","apply","insertBefore","newNode","referenceNode","insertAfter","nextSibling","classList","add","getEndpoint","className","getElementsByTagName","values","endsWith","split","endpoint","infinite_scroll_supported","IntersectionObserverEntry","let","onlyImages","contains","newLoadSpinner","loader","replaceChildrenWith","element","children","textContent","forEach","loadNextPage","form","querySelector","formData","FormData","getAttribute","then","nextPageDoc","DOMParser","parseFromString","articleList","paginationElement","remove","length","articleElement","catch","err","translations","error_loading_next_page","infinite_scroll","intersectionObserveOptions","rootMargin","observedSelector","observer","IntersectionObserver","paginationEntry","isIntersecting","unobserve","observe","isElementInDetail","undefined","getResultElement","isImageResult","resultElement","highlightResult","preventDefault","selectImage","vimKeys","27","key","fun","removeFocus","des","cat","73","searchInputFocus","66","scrollPage","innerHeight","70","85","68","71","scrollPageTo","scrollHeight","86","75","74","80","GoToPreviousPage","78","GoToNextPage","79","openResult","84","82","reloadPage","72","toggleHelp","hotkeys","hasOwnProperty","keyCode","ctrlKey","altKey","shiftKey","metaKey","tagName","toLowerCase","which","noScroll","keepFocus","current","effectiveWhich","next","results","top","documentElement","scrollTop","bot","clientHeight","etop","offsetTop","ebot","nextElementSibling","previousElementSibling","removeAttribute","link","focus","scrollPageToSelected","location","reload","activeElement","blur","closeDetail","pageButtonClick","css_selector","button","click","sel","wtop","wheight","offset","scroll","scrollX","wbot","amount","scrollBy","position","nav","scrollTo","q","setSelectionRange","len","newTab","href","createHelpPanel","htmlId","categories","k","push","sorted","keys","sort","a","b","rows","h4","ul","class","cj","td","aria-label","title","helpPanel","toggle","selectNext","selectPrevious","event","leaflet_target","dataset","leafletTarget","map_lon","parseFloat","mapLon","map_lat","mapLat","map_zoom","mapZoom","map_boundingbox","JSON","parse","mapBoundingbox","map_geojson","mapGeojson","map_bounds","southWest","L","latLng","northEast","latLngBounds","map","osmMapnikUrl","osmMapnikAttrib","osmMapnik","TileLayer","minZoom","maxZoom","attribution","osmWikimediaUrl","osmWikimediaAttrib","osmWikimedia","setTimeout","fitBounds","setView","addLayer","baseLayers","OSM Mapnik","OSM Wikimedia","control","layers","addTo","geoJson","update_engine_descriptions","engine_descriptions","engine_name","description","elements","descriptionElement","sourceElement","Source","load_engine_descriptions","content","img","style","display","error","btnLabelCollapsed","btnLabelNotCollapsed","btnLabelElement","targetElement","iframe_load","srctest","imgElement","thumbnailElement","detailElement","imgSrc","imgLoader","Image","qinput_id","qinput","isMobile","matchMedia","submitIfQuery","search","submit","createClearButton","cs","updateClearButton","ev","autocomplete_provider","autocomplete","AutoComplete","Url","EmptyMessage","no_item_found","HttpMethod","http_method","HttpHeaders","Content-type","X-Requested-With","MinChars","autocomplete_min","Delay","_Position","_Open","params","Array","DOMResults","li","onmousedown","_Select","search_on_category_select","checked","f","exports","module","define","amd","g","global","self","r","n","t","o","c","require","u","code","p","1","ConditionOperator","EventType","isArray","input","specificParams","merge","defaults","create","Input","nodeName","match","$Listeners","_Blur","destroy","_Focus","keyup","KEYUP","keydown","KEYDOWN","getEventsByType","type","mappings","KeyboardMappings","Event","eventIdentifier","condition","mapping","Operator","AND","OR","Not","Is","From","To","Conditions","Callback","makeRequest","callbackErr","propertyHttpHeaders","getOwnPropertyNames","request","_HttpMethod","_Url","queryParams","_Pre","queryParamsStringify","encodeURIComponent","_QueryArg","indexOf","setRequestHeader","onreadystatechange","$Cache","ajax","$AjaxTimer","clearTimeout","Request","abort","cache","_Cache","removeEventListener","removeChild","tmp","arguments","Highlight","getRegex","RegExp","transform","Limit","QueryArg","Enter","liActive","KeyUpAndDown_down","KeyUpAndDown_up","first","last","active","currentIndex","lisCount","item","AlphaNum","oldValue","currentValue","_MinChars","_Render","_Post","_Error","_Close","_EmptyMessage","emptyMessage","_Limit","limit","isNaN","parseInt","minchars","_Highlight","label","now","onclick","offsetHeight","offsetLeft","clientWidth","_RenderRaw","_RenderResponseItems","hasChildNodes","childNodes","reverse","Math","min","abs","innerHTML","Label","Value","returnResponse","json"],"mappings":"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"}